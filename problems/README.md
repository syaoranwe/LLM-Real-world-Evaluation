## 数理计算（30分）
数学题15分，物理化学题15分

评分标准：尝试最多两次，两次中有一次回答正确即给5分，否则0分。
### 塔台高度

问题：
```
计算下面的几何问题：假设小明直立地站在地球一个超大平原的塔台上，塔台高h米，小明高1.7米，眼睛距离头顶10cm，空气能见度极好，不考虑光线的折射等因素，地球的平均直径为12,742公里，为了使小明最远能看到7656米远的地平线，塔台高度h至少为几米？
```
正确答案：`3米`

### 概率统计

问题：
```
求解以下概率问题：一盒中有12个乒乓球，其中9个新的，3个旧的，从盒子中任取3个球来用，用完后装回盒中（新球会变旧球），此时盒中旧球个数X是一个随机变量，其分布列为P(X)，则P(X=4)的值为多少？结果用分数表示：
```
正确答案：27/220（小数大约是0.12272727...）

### 赌徒输赢

问题：
```
求解以下概率问题：某种赌博每局的规则是：赌客先在标记有1，2，3，4，5的卡片中随机摸取一张，将卡片上的数字作为其赌金（单位：元）；随后放回该卡片，再从中随机一次同时摸取两张（不放回抽取），将这两张卡片上数字之差的绝对值的1.4倍作为其奖金（单位：元）。若随机变量m和n分别表示赌客在一局赌博中的赌金和奖金，请求取二者的数学期望，并告诉我在每局赌客平均将会赢得或者输去多少元？
```
正确答案：赌金m的数学期望：3元；奖金n的数学期望：2.8元；赌客平均每局输去0.2元。

### 水库水量

问题：
```
求解以下物理问题：一瓶无害放射性同位素溶液，其半衰期为 20 天，测得每分钟衰变 6×10^7 次．今将这瓶溶液倒入一水库中，80 天后可以认为溶液已均匀分布在水库中，现取 1 立方米水样本测得每分钟衰变 20 次，则该水库蓄水量为多少立方米？
```
正确答案：`187,500 立方米（1.875×10^5立方米）`

### 行星半径

问题：
```
求解以下物理问题：已知某行星 A 质量约为地球质量的 1/81 ，A 的表面重力加速度约为地球表面重力加速度的 1/6 ，地球半径为 R ，则 A 的半径为多少？(结果用 R 和数字表示，可以使用根号)
```
正确答案：
可以表示为以下答案的任意一种（均为同一数字的不同变形）：
- $\frac{R}{\sqrt{13.5}}$
- $0.2722R$
- $\frac{\sqrt{6} \cdot R}{9}$


### 溶液pH

问题：
```
计算以下电离平衡问题：pH=12的NaOH溶液1000mL，为使它的pH降低为11，如果选择加入0.01mol/L的HCl溶液中和，应加多少毫升才能使中和后的总溶液pH降低为11？
```
正确答案：818.1818181...毫升（约818.2毫升）

## 现实逻辑（20分）

### 福字正倒（弱智吧问题）

问题：
```
既然人们在春节贴福字时都要倒着贴，为什么厂家不直接生产倒着的福字？
```

期望回答（之一）：
```
因为福字的正倒取决于不同位置观察者的视角，而不是厂家的生产线，换句话说，正倒并不是福字作为商品的属性。无论厂家生产的是什么样的福字，人们都可以通过旋转使其正着或者倒着。
```

评分标准：看是否答到点子上。两次都没有答到计0分，有一次正确即5分。

### 谁的女儿

问题：
```
小红是家中唯一的女儿，请使用逻辑分析以下情景中小红说「算了吧」最主要原因:

小红（在家里被妈妈打了，伤心地哭着走向爸爸）: 如果有人打你女儿怎么办？ 
爸爸: 谁敢打我女儿我就打她女儿。 
小红（听完后扭头就走，哭得更伤心了）: 那还是算了吧。
```

期望回答：
意识到如果按照爸爸的逻辑行事，他会因为妈妈打小红而再次去打小红，**小红会再被打一次**。（只要回答中有该要点即可）

评分标准：两次尝试内有一次正确：5分；两次还做不到：0分。

### 新家庭关系

问题：
```
请回答下面的逻辑问题：

警察局长在路边与一位老人聊天，这时跑过来一个小孩，着急地对警察局长说：「你爸爸和我爸爸在家里吵起来了！」
老人问：「这孩子是你什么人？」
警察局长说：「他是我儿子。」
请问：这两个吵架的人分别跟警察局长是什么关系？
```

期望回答：
这里的关键是不要把小孩说的"我爸爸"认为是正在路边和老人聊天的警察局长。
```
两个吵架的人分别是警察局长的丈夫(男性配偶)和父亲。
```

评分标准：两次尝试内有一次正确：5分；两次还做不到：0分。


### 手语转译
题目来源：https://weibo.com/1647256370/4979553006518516

Start：
```
聋哑人因为母语是手语，其书面用语的语序与听人的标准汉语语序有所差别，可以请你列举几个例子吗（以汉语为例）？
```

LLM：回答上述问题，这一步不评估对错，因为这一步会影响最终回答的质量，不必额外评估。

问题：
```
很好，我们其实可以依据聋哑人所用语句中的词性和成分，来判断其表达的意思，并将其按照听人常用的语序翻译为听人使用的标准汉语，例如：
老师，黑板，我擦，夸我吗
可以译为：
老师，我来擦黑板，可以夸夸我吗？

接下来，我将给你一段聋哑人打出的语句，请你依据上述办法，将其转译为听人使用的标准汉语，不要遗漏信息：

我星期日晚上九点多我天冷发烧，我自己家打姜三两姜放红糖喝大碗全喝十点半出汗，星期一我家打开门6点来小狗喂，我犯头晕，我星期一好不发烧慢慢家，星期四我家外面门口破烂多，我咳咳一直，我昨天吃苹果，吃二个香焦，涩一个大黄柿子，今天早看看糖尿病，我自己打手，糖5.8，我称120斤，医院社区我去，我正常控制医生告诉
```

期望的正确回答：
```
上个星期日晚上九点多的时候，天气很冷，我发烧了。我自己在家里弄了三两姜和红糖泡水，喝了整整一大碗，十点半的时候出了一身汗。星期一早上六点，我起来给家里的小狗喂食时，我有点头晕，星期一的时候我就在家休养，渐渐不发烧，好些了。到了星期四，我发现家门口有很多破烂，我一直在咳嗽。昨天我吃了苹果，两个香蕉和一个很涩的大黄柿子。今天早上我自己扎手查了一下血糖，血糖是5.8，称了体重是120斤。我去了社区医院，医生告诉我指标控制得正常。
```

除以下有歧义的句子需要合理翻译外，其余句子应该译正确：
```
星期一我家打开门6点来小狗喂
星期四我家外面门口破烂多
```

出现明显不合理的逻辑关系，不能视为正确，例如：
```
星期一6点我家打开门，小狗来喂我
我去了社区医院，把医生控制得很正常
```

缺失的语素填充了，大概翻译过来了，但是语序没有完全整理为听人常用的语序；遗漏了信息等；以上情况不能给满分：
```
- 语序没改变：
我在自己家打姜汤，放了三两姜，放了红糖，喝了大碗，全喝了，十点半出汗了
我血糖是正常控制的，医生告诉我

- 遗漏了重要信息：
我一直在咳嗽。昨天我吃了苹果，两个香蕉。今天早上我自己扎手查了一下血糖，...（遗漏了柿子）
```

评分标准：两次尝试内做到基本正确+合理，符合听人书面用语语序，没有遗漏信息：5分；其中合理性3分，不遗漏信息1分，语序1分。两次还做不到基本正确：0分。

## IT代码（10分）

### 依据给定机器翻译接口制作双语字幕

问题：
```
接下来，你将为我使用Python3撰写一个脚本程序，以依据我给定机器翻译接口制作SRT双语字幕。
具体要求如下：
## 需求
我有一个英文SRT字幕，其内容（开头部分）为：
"""
1
00:00:33,400 --> 00:00:34,860
Mom

2
00:00:35,200 --> 00:00:37,760
What will you do if I get married?

3
00:00:37,800 --> 00:00:40,000
I’ll be on my own

4
00:00:44,720 --> 00:00:46,860
Has your boyfriend said
he wants to marry you?

5
00:01:01,360 --> 00:01:04,010
If you're on your own, there will
be no one to take care of you

6
00:01:04,040 --> 00:01:06,120
I don’t need anyone to take care of me
"""
其中每条字幕均由一个数字序号、时间码（分别表示字幕的起始时间和结束时间，格式为"小时:分钟:秒,毫秒"，例如"00:00:33,400"表示00小时00分钟33秒400毫秒）和字幕内容（可以跨越多行）构成。

你需要先将字幕文件中跨越多行的字幕通过替换换行符到一个空格来将多行字幕整理为一行。然后借助我提供的机器翻译接口来进行翻译（到中英双语字幕）：
"""
1
00:00:33,400 --> 00:00:34,860
妈妈
Mom

2
00:00:35,200 --> 00:00:37,760
以后我如果结婚你怎么办？
What will you do if I get married?

3
00:00:37,800 --> 00:00:40,000
我就自己一个人啊
I’ll be on my own.

4
00:00:44,720 --> 00:00:46,860
你男朋友有说要娶你吗
Has your boyfriend said he wants to marry you?

5
00:01:01,360 --> 00:01:04,010
你自己一个人没人照顾
If you're on your own, there will be no one to take care of you.

6
00:01:04,040 --> 00:01:06,120
我不需要人照顾
I don’t need anyone to take care of me.
"""
其中，中英双语字幕与原英文字幕的格式区别，在于：
1. 时间码行和英文字幕行之间填充了中文字幕行
2. 中文字幕末尾不用句号（。或者.），需要在翻译后去除
3. 英文字幕经过整理，都变为一行。

我的英文字幕路径为：D:\Download\video.en.srt
翻译后的双语字幕保存路径为：D:\Download\video.en-chs.srt
字幕文件编码均为utf-8
上述两个路径可能在后续运行程序时变化，请留在程序文件开头方便我修改

## 翻译接口请求与响应格式

请求格式如下：
"""
curl '接口地址' \
  -H 'Accept: */*' \
  -H 'Authorization: Bearer 验证Token' \
  -H 'Content-Type: application/json' \
  -H 'User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36' \
  --data-raw $'{\n    "text": "Lili, a feisty 10-year-old girl.",\n    "source_lang": "en",\n    "target_lang": "zh-CHS"\n}' \
  --compressed \
  --insecure
"""
其中：
接口地址='http://127.0.0.1:52025/sogou_translate';
验证Token='myauthtoken';
上述两个参数可能在后续运行程序时变化，请留在程序文件开头方便我修改

返回内容是json，其中data是译文：
"""
{
    "code": 200,
    "data": "莉莉，一个活泼的10岁女孩。",
    "id": 1707610197,
    "method": "sogou",
    "source_lang": "en",
    "target_lang": "zh-CHS"
}
"""

## 编程要求
1. 你可以使用requests来进行网络请求
2. 我不想安装额外的第三方库来解析SRT文件
3. 你无需执行该程序，你只需给出完整的代码即可，我会在我本地运行
4. 代码请添加详细的中文注释
5. 翻译接口有可能出现超时、429频繁请求等错误，遇到此类情况请在代码里重试一次，重试后依然错误请让程序直接退出。
6. 每20条字幕合并到一起提交给接口翻译，最后不足20条的合并到一起提交。以减少接口请求量。
```

评分标准：两次尝试，取首次正确的评分：

如果填入正确的路径和接口参数，运行后可以得到符合要求的双语字幕文件（注意输出的双语字幕是否可以被Aegisub等字幕软件正确解析，时间码是否发生变化，译文和原文是否正确对应等），则得基础分10分，然后依据以下细节点扣分：

- 不是使用的requests来进行网络请求：扣除1分
- 需要安装额外的第三方库来解析SRT文件：扣除1分
- 没有添加中文注释，或者添加了英文注释，或者注释太少（少于4条）：扣除1分
- 接口错误后没有良好的重试机制，或者重试后依然错误，程序没有直接退出：扣除1分
- 没有合并20条字幕一起翻译：扣除1分
- 路径和接口参数没有放在文件开头方便修改：扣除1分

## 领域专业能力（10分）

### 药物分类

分类来源：[国家基本药物目录 2018版](http://www.nhc.gov.cn/ewebeditor/uploadfile/2018/10/20181025183346942.pdf)

问题：
```text
你现在将协助药房药师正确分类药品：

目前该药房有以下分类：

- 抗菌药（针对细菌、支原体、衣原体、立克次体、螺旋体等）
- 抗真菌药
- 抗病毒药
- 抗寄生虫病药
- 麻醉药（局麻、全麻用药和麻醉辅助用药）
- 解热镇痛药（含抗炎、抗风湿、抗痛风药）
- 神经系统药物 （含抗震颤麻痹、肌无力、癫痫、痴呆药等）
- 精神障碍药物（含抗精神病、抑郁、焦虑、躁狂药，镇静催眠药）
- 心血管系统药物（含抗心绞痛药、抗心律失常药、抗心力衰竭药、抗高血压药、抗休克药、调脂及抗动脉粥样硬化药）
- 呼吸系统药物（祛痰、镇咳、平喘药物）
- 消化系统药物
- 泌尿系统用药（含利尿药及脱水药、良性前列腺增生用药、透析用药）
- 血液系统用药（含抗贫血药、抗血小板药、促凝血药、抗凝血药及溶栓药、血容量扩充剂）
- 激素及影响内分泌药
- 抗变态反应药
- 免疫系统用药
- 抗肿瘤药 
- 维生素、矿物质类药
- 调节水、电解质及酸碱平衡药 
- 解毒药
- 皮肤科用药
- 眼科用药
- 耳鼻喉科用药
- 妇产科用药

以下将给你一系列药物的名称，请你先用简短的一句话简要总结每个药物功效或适应症，然后给出其分类结论，如果有多个合适的分类结论，请你选择应用最广泛用途的分类结论，分类结论应该在每个药物的回复最后给出，以【】符号包裹。【】符号内是上述分类名之一，例如【解热镇痛药】。

你对每个药品的回复中应该有且只有一个【】符号，即最后的分类结论。每次回复中【】符号的数量应该与提供的药品名数量一致。

例如：

我：
- 阿莫西林胶囊
- 布洛芬缓释胶囊
- 口服补液盐散剂

你：
- 阿莫西林是一种广谱抗生素，主要用于治疗由敏感细菌引起的各种感染。因此属于【抗菌药】。
- 布洛芬是一种非甾体抗炎药，主要用于缓解轻到中度疼痛。因此，布洛芬应该归类为【解热镇痛药】。
- 口服补液盐是一种用于治疗和预防脱水，特别是由腹泻引起的脱水的溶液。应该归类为【调节水、电解质及酸碱平衡药】。

现在开始分类：
- 葡萄糖酸钙片
- 维生素C片
- 盐酸氨溴索片
```

葡萄糖酸钙片和维生素C片应该被归类为【维生素、矿物质类药】，盐酸氨溴索片是【呼吸系统药物】，本次回复不计算分数。

后续对话依次选取以下药物名称(10个一分隔，每组10个)：
```
- 二甲双胍肠溶胶囊
- 复方愈创木酚磺酸钾口服溶液
- 硫唑嘌呤片
- 注射用硫酸长春新碱
- 吗替麦考酚酯分散片
- 磷酸苯丙哌林缓释片
- 水飞蓟素胶囊
- 琥珀酸亚铁缓释片
- 盐酸赛庚啶片
- 碘解磷定注射液

- 酒石酸美托洛尔片
- 佐匹克隆片
- 伊曲康唑胶囊
- 维A酸乳膏
- 盐酸多沙普仑注射液
- 盐酸阿米替林片
- 阿托伐他汀钙片
- 噻托溴铵粉雾剂
- 聚乙二醇散剂
- 盐酸纳洛酮注射液

- 甲氧氯普胺片
- 硝酸毛果芸香碱滴眼液
- 盐酸羟甲唑啉喷雾剂
- 盐酸艾司氯胺酮鼻喷雾剂
- 盐酸氟桂利嗪胶囊
- 盐酸布比卡因注射液
- 乙胺嘧啶片
- 氢氯噻嗪片
- 乙酰半胱氨酸颗粒
- 盐酸齐拉西酮胶囊

- 富马酸比索洛尔片
- 盐酸雷尼替丁片
- 丙酸氟替卡松气雾剂
- 瑞巴派特片
- 盐酸特比萘芬凝胶
- 玛巴洛沙韦片
- 吡嗪酰胺片
- 注射用盐酸平阳霉素
- 乳酸钠林格注射液
- 乙酰胺注射液
```

期望的正确解答：

- 二甲双胍肠溶胶囊`【激素及影响内分泌药】`
- 复方愈创木酚磺酸钾口服溶液`【呼吸系统药物】`
- 硫唑嘌呤片`【免疫系统用药】`
- 注射用硫酸长春新碱`【抗肿瘤药】`
- 吗替麦考酚酯分散片`【免疫系统用药】`
- 磷酸苯丙哌林缓释片`【呼吸系统药物】`
- 水飞蓟素胶囊`【消化系统药物】`
- 琥珀酸亚铁缓释片`【血液系统用药】`
- 盐酸赛庚啶片`【抗变态反应药】`
- 碘解磷定注射液`【解毒药】`
- 酒石酸美托洛尔片`【心血管系统药物】`
- 佐匹克隆片`【精神障碍药物】`
- 伊曲康唑胶囊`【抗真菌药】`
- 维A酸乳膏`【皮肤科用药】`
- 盐酸多沙普仑注射液`【神经系统药物】`
- 盐酸阿米替林片`【精神障碍药物】`
- 阿托伐他汀钙片`【心血管系统药物】`
- 噻托溴铵粉雾剂`【呼吸系统药物】`
- 聚乙二醇散剂`【消化系统药物】`
- 盐酸纳洛酮注射液`【解毒药】`
- 甲氧氯普胺片`【消化系统药物】`
- 硝酸毛果芸香碱滴眼液`【眼科用药】`
- 盐酸羟甲唑啉喷雾剂`【耳鼻喉科用药】`
- 盐酸艾司氯胺酮鼻喷雾剂`【精神障碍药物】`
- 盐酸氟桂利嗪胶囊`【神经系统药物】`
- 盐酸布比卡因注射液`【麻醉药】`
- 乙胺嘧啶片`【抗寄生虫病药】`
- 氢氯噻嗪片`【泌尿系统用药】`
- 乙酰半胱氨酸颗粒`【呼吸系统药物】`
- 盐酸齐拉西酮胶囊`【精神障碍药物】`
- 富马酸比索洛尔片`【心血管系统药物】`
- 盐酸雷尼替丁片`【消化系统药物】`
- 丙酸氟替卡松气雾剂`【呼吸系统药物】`
- 瑞巴派特片`【消化系统药物】`
- 盐酸特比萘芬凝胶`【皮肤科用药】`
- 玛巴洛沙韦片`【抗病毒药】`
- 吡嗪酰胺片`【抗菌药】`
- 注射用盐酸平阳霉素`【抗肿瘤药】`
- 乳酸钠林格注射液`【调节水、电解质及酸碱平衡药】`
- 乙酰胺注射液`【解毒药】`


评分标准和说明：

- 后续可以使用上市的新药替换上述测试列表，更能看出模型的语料有没有补充最新的医药成果语料。
- 一次发送10个药品名批量测试（节省计算次数）。即4次批量10个。
- 基础分10分，上述40个测试药物，错一个分类扣除0.5分，不遵循格式要求（例如输出了多个【】），输出了错误的分类（例如【调节电解质平衡药】）或者不存在的分类（例如【口腔用药】）也算错误。
- 在批量测试中，如果出现了额外信息，例如最后总结了一条「以上药物可以分类为xxx」，或者【】符号的数量与提供的药品名数量因为额外信息导致了不一致，应该扣除1分。
- 本题不测试其长对话能力，因此每批次提问前应该避开上一批次提问结果的影响，可以善用问题编辑功能。

## 现实任务（30分，两题分别20+10分）

### 智能家居Agent

注意该问题输入长度在4400token左右（GPT-3.5/4），如果输入的上下文窗口明确低于5K，就不再测试，直接计算本题为0分。

#### 评分标准：每个5分，共4个，总分20分；每个问题只尝试1次。

#### 问题基础模板

```
你现在的身份是小爱，一个智能家居的智能中枢，负责响应用户的意图，为其执行智能家电的操控指令。

例如，当用户说：
"""
小爱，把客厅的空调制冷打开，温度调到20度，自动风力。
"""

你需要回复：
"""
{touser}好的，主人，我将为你打开客厅的空调，模式制冷，温度20度，风力自动。|{tocenter}[openDevice(id=3)][setAirConditioner(id=3,mode=cold,temperature=20,windpower=auto)]
"""

其中，你的回复前半段是回复用户的话语，以{touser}开始，后半段是函数调用指令，以{tocenter}开始，两者中间使用|分隔。网关中枢将会读取你的函数调用指令并解析，执行对应的动作。例如上述回复中，你先打开了id=3的客厅的空调这一设备，然后将其设置为模式制冷，温度20度，风力自动。

## 函数调用指令格式
函数调用指令总是出现在你回复的后半段，每一个指令均用[]符号包裹，以方便网关中枢解析指令。不同指令之间有执行顺序。[]符号中间没有分隔符。

函数调用指令类似Python函数调用，由函数名和参数构成，参数分为可选参数和必选参数。例如上面的例子中，id为必选参数，其他为可选参数。

## 不同类别的智能家电函数调用说明

### 基本设备

所有设备继承自基本设备，包含以下属性：
- 设备ID：id，值为整数
- 设备类型：type，值为字符串
- 设备位置：location，值为字符串
- 设备名：name，值为字符串
- 设备当前是否在线(上电+联网)：online，值为true或者false
- 设备当前是否工作：isWorking，值为true或者false
- 设备当前已持续工作时间：workingTime（分钟，整数；关机状态下为0，开机状态下持续增加）
- 设备当前已停止工作时间：stopTime（分钟，整数；开机状态下为0，关机状态下持续增加）

包含的可执行函数：
- 获取属性名对应的属性值：[getValue(id,key)] id,key均为必选参数
- 启动设备至工作状态：[startDevice(id)] id为必选参数
- 停止设备运转(关机)：[stopDevice(id)] id为必选参数

### 特殊函数：计划任务

1. 设置计划任务：[doSomeAcitonWhen(id=0,action,when)] 

3个参数均为必选参数，id=0是固定的传入参数值，0表示网关中枢，也就是说这条命令是由中枢负责执行的，action是将要执行的动作，when代表的是执行动作的条件。具体调用详解见下。

计划任务这一函数调用不可嵌套被action调用。action调用的只能是实际设备的函数（即id不为0）。

2. 查看计划任务：[listAciton(id=0)]

调用本函数网关中枢将打印当前所有的计划任务到一个字典，键值分别表示action_id和任务表达式，例如:
{
  "1": 'doSomeAcitonWhen(id=0, action="startDevice(3)", when="devicestatus(id=3, key=isWorking, value=false)&devicestatus(id=4, key=nowHumi, value='>80')")',
  "2": 'doSomeAcitonWhen(id=0, action="startDevice(5)&setAirConditioner(id=5,mode=cold,temperature=20,windpower=auto)", when="dayloop(1800)&devicestatus(id=5, key=isWorking, value=false)&{devicestatus(id=4, key=nowTemp, value='>=30')|devicestatus(id=4, key=nowHumi, value='>80')}")'
}

3. 取消计划任务：[undoSomeAciton(id=0,action_id)]

两个参数均为必选，其中action_id表示的是listAciton查询到的计划任务id

#### 设置计划任务详解

doSomeAcitonWhen(id,action,when)中，

action是将要执行的动作，值是"调用的函数和传入的参数"（""符号包裹的字符串）。如果有多个动作需要执行，可以依次用&符号连接，网关中枢将会依次执行。例如action="startDevice(id=3)&stopDevice(id=5)"，表示的动作为启用id为3的设备，然后再关停id=5的设备。

when代表的是执行动作的条件。值的表达式类似一个用""符号包裹的字符串表示的函数式，这个函数式会在满足条件时返回True，从而触发action。

有多种条件可选：

- 每日循环条件：dayloop(time,maxloops)，每天在time时执行动作，最多执行maxloops次，time的格式为HHMM，maxloops为可选参数，正整数值，不设置时表示持续循环不设上限。例如dayloop(time=1630)表示为每天的16点30分触发动作，dayloop(time=1030,maxloops=5)表示每天的10点30分触发动作，循环持续5天。
- 每周循环条件：weekloop(day,time,maxloops)，每周的周几(day)的time时执行动作，最多执行maxloops次，day和time为必选参数，maxloops为可选参数。time和maxloops的含义和值格式与dayloop相同。day的取值有[1,2,3,4,5,6,7]，表示周几。例如weekloop(day=1,time=1700)表示每周一的17点00分执行动作，持续循环。
- 延迟条件：delay(time)，一段时间后返回True执行动作，time为分钟，正整数值，例如delay(time=480)表示为480分钟后（也就是8小时后）执行动作。
- 定时条件：setTime(time)，当到达设定时间时将返回True触发动作。虽然可以设置为过去的时间，但是实际上永远不会触发。time的格式为YYYYMMDDHHMM，例如setTime(time=202401032301)表示在2024年01月03日23点01分执行动作。
- 设备属性满足条件：devicestatus(id, key, value)，即表示在特定id的设备的属性key的值为value时，触发动作。当value的值是一个特定格式的字符串时（即'比较符+数字'，例如'>30'表示大于30，支持的比较符有[=,>,>=,<,<=]），可以在查询key属性返回数值时执行大小比较，如果不添加''符号表示字符串，则默认为查询到的值完全等同于value传入的字符串值才触发条件。例如devicestatus(id=4, key=nowTemp, value='>=30')表示当id为4的设备的属性nowTemp的取值大于等于30时，触发动作。通过这一设置，可以使得室内环境监测设备同其他设备产生联动。
- 复合条件之and/与条件：将条件函数式用&符号相连，例如A&B代表必须A、B都为True时执行动作。
- 复合条件之or/或条件：将条件函数式用|符号相连，例如A|B代表只要A、B中有一个表达式的值为True即触发动作。
- 复合条件之与或条件：在使用括号{}时，将优先计算{}内条件函数表达式的值，否则按照类似算数计算法则，先计算and/&/与，再计算or/|/或。

示例：

`doSomeAcitonWhen(id=0, action="startDevice(5)&setAirConditioner(id=5,mode=cold,temperature=20,windpower=auto)", when="dayloop(1800)&devicestatus(id=5, key=isWorking, value=false)&{devicestatus(id=4, key=nowTemp, value='>=30')|devicestatus(id=4, key=nowHumi, value='>80')}") `

表示的含义为：每天的18点00分执行一次检测，如果id=5的设备为关机状态，并且id=4的设备属性nowTemp大于等于30或者nowHumi大于80，则调用动作startDevice(5)，之后再调用setAirConditioner(id=5,mode=cold,temperature=20,windpower=auto)。这条指令可以实现设备之间的定时联动。

注意：设备属性满足条件这一条件表达式在与其他时间相关的表达式复合使用时，只会在触发时间时，自动执行设备属性检测一次。而设备属性满足条件在单独使用或者与其他设备属性满足条件复合使用时，网关中枢将会持续定期监测，如果有设定value的值为比较数字大小，则对应的表达式只在属性值变化到设定状态时触发（类似边沿触发的概念）。例如：
`when="devicestatus(id=5, key=isWorking, value=false)&devicestatus(id=4, key=nowTemp, value='>=30')`表示网关中枢将会持续定期监测设备4的nowTemp是否增长到大于等于30，如果增长到30且设备5关机，则触发。如果设备5关机，但是上一次设备4的nowTemp值为32，则不会触发。

### 空调 type=airConditioner

包含属性：
- 当前运行模式：mode 范围：[cold,warm,dehumi,auto]，分别代表[制冷,制热,除湿,自动]
- 当前设置温度：nowSetTemp 12-32之间的整数值或者auto
- 当前设置风力：windPower 范围：[low,mid,high,auto]，分别代表低中高和自动风力

包含方法：
- 设置空调：[setAirConditioner(id, mode, temperature, windPower)] id为必选参数，其余为可选参数。mode（运行模式，可选值：[cold,warm,dehumi,auto]，分别代表[制冷,制热,除湿,自动]，默认auto），temperature（设定温度，12-32之间的整数值或者auto），windPower（设定风力，可选值：[low,mid,high,auto]，分别代表低中高和自动风力）这些可选参数如果不传入则默认auto。注意：在空调关机时调用该函数不会自动启用空调。该方法只在设备启用(start)后调用才能生效。

### 除湿机 type=dehumidifier

包含属性：
- 目标湿度：nowSetHumi，整数

包含方法：
- 设定湿度大于多少时自动启动除湿（设定目标湿度）：[setDehumiTo(id, to_humidity)] id为必选参数，to_humidity（湿度设定值）为可选参数，0-100的整数，默认60。当设备开机，并且湿度大于设定值时，将会自动除湿，否则设备将处于准备状态，当环境湿度上升到设定湿度以上时，将会从准备状态转换到除湿状态。环境湿度由除湿机自身检测，而非由网关中枢传入，可能与实际室内湿度存在出入。当设定目标湿度为0时，除湿将持续运行，为100时，设备将一直待机准备。注意该方法只在设备启用(start)后调用才能生效。

### 加湿器 type=humidifier

包含属性：
- 当前湿度设定值：nowToHumi，整数
- 当前剩余水量：waterBalance，0-100的整数，代表当前剩余水量的百分比，为0时设备将待机，无法加湿

包含方法：
- 设定湿度小于多少时自动启动加湿（设定目标湿度）：[setHumidifier(id, to_humidity)] id为必选参数，humidity（湿度设定值）为可选参数，0-100的整数，默认50。当设备开机，并且湿度小于设定值时，将会自动加湿，否则设备将处于准备状态，当环境湿度下降到设定湿度以下时，将会从待机准备状态转换到加湿状态。环境湿度由加湿器自身检测，而非由网关中枢传入，可能与实际室内湿度存在出入。当设定目标湿度为100时，加湿将持续运行，为0时，将一直待机准备。注意该方法只在设备启用(start)后调用才能生效。

### 温湿度计 type=thermometerHygrometer

包含属性：
- 当前温度值：nowTemp，-20至60之间的整数，摄氏度
- 当前湿度值：nowHumi，0-100的整数，表示当前空气的相对湿度百分比

包含方法：空


## 当前用户家中已安装的智能家电

以下使用json格式表示每个智能设备的ID、类型、位置和名称

### 客厅 location=room1
- `{ "id": 10, "type": "airConditioner", "location": "room1", "name": "客厅空调", "online": true, "isWorking": false }`
- `{ "id": 11, "type": "dehumidifier", "location": "room1", "name": "客厅除湿机", "online": true, "isWorking": false }`
- `{ "id": 12, "type": "thermometerHygrometer", "location": "room1", "name": "客厅温湿度计", "online": true, "isWorking": true }`

### 主卧 location=room2
- `{ "id": 20, "type": "airConditioner", "location": "room2", "name": "主卧空调", "online": true, "isWorking": false }`
- `{ "id": 21, "type": "humidifier", "location": "room2", "name": "主卧加湿器", "online": true, "isWorking": false }`
- `{ "id": 22, "type": "dehumidifier", "location": "room2", "name": "主卧除湿机", "online": true, "isWorking": false }`
- `{ "id": 23, "type": "thermometerHygrometer", "location": "room2", "name": "主卧温湿度计", "online": true, "isWorking": true }`

### 次卧 location=room3
- `{ "id": 30, "type": "airConditioner", "location": "room3", "name": "次卧空调", "online": true, "isWorking": false }`
- `{ "id": 31, "type": "thermometerHygrometer", "location": "room3", "name": "次卧温湿度计", "online": true, "isWorking": true }`


## 先前记忆

在这一部分中，记录了先前的用户指令、执行结果，或者获取的当前环境状态。
"""
在这里填入下面问题的先前记忆部分
"""

## 用户当前指令

请依据上述要求，回复用户指令，并依据用户需要来调用或者不调用函数：
"""
在这里填入下面问题的用户当前指令部分
"""
```

#### 问题回答1：
先前记忆部分填入：
```
20240201 16:01 user: 小爱，查看一下当前主卧的湿度，如果低于50就把加湿器打开。
20240201 16:01 小爱: {touser}好的，主人，我先为您查询一下主卧的湿度。|{tocenter}[getValue(id=23,key=nowHumi)]
20240201 16:02 center: {to小爱}device id=23, key=nowHumi, value is 47
20240201 16:02 小爱: {touser}主人，主卧的湿度为47，低于50，我将为你打开主卧的加湿器。|{tocenter}[startDevice(id=21)][setHumidifier(id=21, to_humidity=50)]
20240201 16:02 center: {to小爱}device id=21 started
20240201 16:02 center: {to小爱}device id=21 setHumidifier to_humidity=50 success
20240201 16:02 小爱: {touser}主人，主卧的加湿器已经成功打开，并且设定目标湿度50。有什么别的吩咐请告诉我。
20240201 16:04 user: 唉？小爱，为什么这主卧的湿度计显示湿度才48，这加湿器就自个儿停了啊？
20240201 16:04 小爱: {touser}主人，加湿器在达到设定的目标湿度后可能会进入待机状态以防湿度过高。我将为您检查一下主卧加湿器的当前工作状态和目标湿度设置，以及剩余水量。|{tocenter}[getValue(id=21,key=isWorking)][getValue(id=21,key=nowToHumi)][getValue(id=21,key=waterBalance)]
20240201 16:04 center: {to小爱}device id=21, key=isWorking, value is true
20240201 16:04 center: {to小爱}device id=21, key=nowToHumi, value is 50
20240201 16:04 center: {to小爱}device id=21, key=waterBalance, value is 73
20240201 16:04 小爱: {touser}主人，加湿器还在工作状态，目标湿度设置的为50，水量剩余百分之73。看起来是正常的呢。
```

用户当前指令填入：
```
20240201 16:04 user: 所以为什么主卧的湿度计显示湿度才48，明明小于50，加湿器却自己停了，不冒烟了呢？
```


期望回答：`{touser}主人，温湿度计的读数可能会有延迟或与加湿器自己感知的实时湿度有所差异。如果您觉得需要，我可以重新调整（调高）加湿器的目标湿度设置。` (要点：加湿器的湿度是自己读取的，而不是来自温湿度计，4分，后续可调整设置1分)


#### 问题回答2：
先前记忆部分填入：
```
20240201 16:01 user: 小爱，看一下当前的计划任务。
20240201 16:01 小爱: {touser}好的，主人，我来查看一下当前已经设置的计划任务。|{tocenter}[listAciton(id=0)]
20240201 16:02 center: {to小爱}
{
  "1": 'doSomeAcitonWhen(id=0, action="startDevice(22)", when="devicestatus(id=22, key=isWorking, value=false)&devicestatus(id=23, key=nowHumi, value='>90')")'
}
20240201 16:02 小爱: {touser}主人，当前您设置了1条计划任务。这条任务是：持续监测主卧的湿度是否高于90，如果超过，并且主卧的除湿机没有打开的话，则打开除湿机。
20240201 16:03 user: 这条任务得修改，改成每周一的下午6点检测一次主卧的湿度和温度。如果湿度大于85或者温度大于等于27度，就打开除湿机，然后每周一的晚上9点关闭除湿机。
20240201 16:03 小爱: {touser}好的主人，我将先删除当前这条计划任务，然后为您新增2条计划任务，计划任务一是每周一的下午6点检测一次主卧的湿度和温度。如果湿度大于85或者温度大于等于27度，就打开主卧的除湿机，设置目标湿度为60。计划任务二是每周一的晚上9点关闭主卧的除湿机，无论除湿机是开还是关。如果您觉得可以，我将告诉网关中枢去设置计划任务。
```
用户当前指令填入：
```
20240201 16:04 user: 可以，你去设置吧。
```
期望回答：
```
{touser}好的，主人，我现在开始设置计划任务。|{tocenter}[undoSomeAciton(id=0,action_id=1)][doSomeAcitonWhen(id=0,action="startDevice(22)&setDehumiTo(id=22,to_humidity=60)",when="weekloop(day=1,time=1800)&{devicestatus(id=23, key=nowHumi, value='>85')|devicestatus(id=23, key=nowTemp, value='>=27')}")][doSomeAcitonWhen(id=0,action="stopDevice(22)",when="weekloop(day=1,time=2100)")]
```
要点：注意调用指令的正确性


#### 问题回答3：
先前记忆部分填入：
```
20240201 16:01 user: 小爱，看一下当前的计划任务。
20240201 16:01 小爱: {touser}好的，主人，我来查看一下当前已经设置的计划任务。|{tocenter}[listAciton(id=0)]
20240201 16:02 center: {to小爱}
{
}
20240201 16:02 小爱: {touser}主人，当前没有设置计划任务。
20240201 16:03 user: 这几天天气变化太大，空调得随时准备好应对天气变化，你为我设置一个任务，未来10天，每天的下午19点检测一下客厅的温度，如果温度低于15度就把空调打开，设置制热温度25度。如果温度高于26度，就设置空调制冷22度。
20240201 16:03 小爱: {touser}好的主人，我将为您设置两个计划任务。计划任务一：未来10天，如果每天19点客厅的温度低于15度，打开空调制热，温度25度。计划任务二：未来10天，如果每天19点客厅的温度高于26度，打开空调制冷，温度22度。您觉得这样可以吗？可以的话我将为您设置。
```
用户当前指令填入：
```
20240201 16:04 user: 可以，你去设置吧。
```
期望回答：
```
{touser}好的，主人，我现在就为您设置这两个计划任务。|{tocenter}[doSomeAcitonWhen(id=0,action="startDevice(10)&setAirConditioner(id=10,mode=warm,temperature=25)",when="dayloop(1900,maxloops=10)&devicestatus(id=12,key=nowTemp,value='<15')")][doSomeAcitonWhen(id=0,action="startDevice(10)&setAirConditioner(id=10,mode=cold,temperature=22)",when="dayloop(1900,maxloops=10)&devicestatus(id=12,key=nowTemp,value='>26')")]
```
要点：注意调用指令的正确性


#### 问题回答4：
先前记忆部分填入：
```
20240201 16:01 user: 小爱，看一下当前的计划任务。
20240201 16:01 小爱: {touser}好的，主人，我来查看一下当前已经设置的计划任务。|{tocenter}[listAciton(id=0)]
20240201 16:02 center: {to小爱}
{
}
20240201 16:02 小爱: {touser}主人，当前没有设置计划任务。
```
用户当前指令填入：
```
20240201 16:02 user: 这几天天气变化实在太大，湿度一会儿不是太干就是太湿。我希望你能为我规划一个计划任务，在我每天下午6点下班回到家前，提前检测主卧的湿度，然后依据湿度的高低，自动打开除湿机或者加湿器，保持湿度在60-80之间，这样我回来后才会舒适。你可以直接设置多个计划任务。无需我的确认。
```
期望回答：
```
{touser}好的，主人，我将为你设定计划任务，每天提前下午5点30分自动检测主卧的湿度，并根据湿度的高低，自动启动除湿机或加湿器，以保持湿度在60-80之间，确保您回家时享受舒适的环境。|{tocenter}[doSomeAcitonWhen(id=0,action="startDevice(21)&setHumidifier(id=21,to_humidity=60)",when="dayloop(1730)&devicestatus(id=23,key=nowHumi,value='<60')")][doSomeAcitonWhen(id=0,action="startDevice(22)&setDehumiTo(id=22,to_humidity=80)",when="dayloop(1730)&devicestatus(id=23,key=nowHumi,value='>80')")]
```
要点：
1. 提前0.5-1小时检测，提前启动（1分）
2. 除湿机和加湿器的目标湿度分别小于80和大于60（1分，等于的话这一分没有）
3. 注意规划的正确性，别把除湿机和加湿器用错了。如果认为规划出来的任务无法实现用户的要求，直接计算为0分。


### 超市货品结算计算

题目灵感来源：超市、食堂等的自助结算机

评分标准和说明：
- 首先尝试问题1，正确的话继续尝试问题2，错误则重复尝试问题1
- 两次提问均是新窗口
- 两次尝试金额计算均正确得10分；只能正确一次得5分；两次均错误：0分。
- 如果众多模型都可以做到正确解答，拉不开差距，请将价目表里的商品计价变得更复杂，购物车中的商品更多（但是不要超过模型最大回复窗口）。

问题1：
```
以下为晓红爸在超市购买东西时购物车中的物品和通过超市微信小程序实时查阅的货物价目表，请帮糊涂的晓红爸计算一共需要付多少钱，已知晓红爸是超市的会员，但是今天他糊涂地没有带会员卡，用不了。

购物车货品：
- 苹果1斤
- 菲律宾进口香蕉10根
- 光明炭烧酸奶一瓶
- 光明鲜牛奶975ml
- 红心火龙果：2个
- 160g桥头牌火锅底料
- 原味冷藏豆乳2包+草莓味冷藏豆乳1包
- 小米椒100g
- 水果味汤圆1袋
- 鸡蛋饺2袋
- 香菇：250g
- 广西沙糖桔1箱


超市部分商品价目表：
- 苹果：5元/kg（会员价4元/kg）
- 小米：3.5元/500g
- 菲律宾进口香蕉：1.5元/根
- 光明炭烧酸奶：15元/1.2kg（一瓶）
- 光明鲜牛奶：12元/975ml（一瓶）
- 红心火龙果：3.5元/1个，不满3个按4元/个计价（会员价任意个数一律3元/个）
- 白心火龙果：5元/个
- 海底捞牌火锅底料：120g规格：5元/包；160g规格：7元/包
- 桥头牌火锅底料：120g规格：4元/包；160g规格：5元/包
- 奥利奥草莓味饼干：97g，5.2元（会员价5元）
- 冷藏豆乳：原味：300g/袋，1.2元/袋；草莓味：300g/袋，1.4元/袋；会员可以任意口味任选三包3元；
- 花菜：4.7元/500g
- 小米椒：1.7元/50g
- 大娃娃菜：3.6元/500g
- 黑芝麻汤圆：5元/400g/袋
- 水果味汤圆：6元/360g/袋（会员价5.5元）
- 鸡蛋饺：3.5元/10只/袋（会员价3元）
- 鸡蛋：22元/30枚约1800g/盒
- 糯米烧麦：14元/20个约1kg/袋
- 香菇：9元/1斤
- 黑鱼片：5元/250g/袋
- 广西沙糖桔：21元/5斤/箱（会员价20元）
```

问题1期望的正确回答：
```
单项计算：
- 苹果1斤：5元/kg * 0.5kg = 2.5元
- 菲律宾进口香蕉10根：1.5元/根 * 10 = 15元
- 光明炭烧酸奶一瓶：15元
- 光明鲜牛奶975ml：12元
- 红心火龙果：2个：4元/个*2个=8元
- 160g桥头牌火锅底料：5元
- 原味冷藏豆乳2包+草莓味冷藏豆乳1包：1.2元/袋*2袋+1.4元/袋*1袋=3.8元
- 小米椒100g：1.7元/50g * 2个50g = 3.4元
- 水果味汤圆1袋：6元
- 鸡蛋饺2袋：3.5元/袋 * 2袋 = 7元
- 香菇：250g ：9元/1斤 * 0.5斤 = 4.5元
- 广西沙糖桔1箱：21元

合计：2.5+15+15+12+8+5+3.8+3.4+6+7+4.5+21=103.2元
```

问题2：
```
以下为晓红爸在超市购买东西时购物车中的物品和通过超市微信小程序实时查阅的货物价目表，请帮糊涂的晓红爸计算一共需要付多少钱，已知晓红爸是超市的会员，虽然今天他忘了带会员卡，但是他可以使用微信小程序里的电子会员卡结账。

购物车货品：
- 苹果1斤
- 菲律宾进口香蕉10根
- 光明炭烧酸奶一瓶
- 光明鲜牛奶975ml
- 红心火龙果：2个
- 160g桥头牌火锅底料
- 原味冷藏豆乳2包+草莓味冷藏豆乳1包
- 小米椒100g
- 水果味汤圆1袋
- 鸡蛋饺2袋
- 香菇：250g
- 广西沙糖桔1箱


超市部分商品价目表：
- 苹果：5元/kg（会员价4元/kg）
- 小米：3.5元/500g
- 菲律宾进口香蕉：1.5元/根
- 光明炭烧酸奶：15元/1.2kg（一瓶）
- 光明鲜牛奶：12元/975ml（一瓶）
- 红心火龙果：3.5元/1个，不满3个按4元/个计价（会员价任意个数一律3元/个）
- 白心火龙果：5元/个
- 海底捞牌火锅底料：120g规格：5元/包；160g规格：7元/包
- 桥头牌火锅底料：120g规格：4元/包；160g规格：5元/包
- 奥利奥草莓味饼干：97g，5.2元（会员价5元）
- 冷藏豆乳：原味：300g/袋，1.2元/袋；草莓味：300g/袋，1.4元/袋；会员可以任意口味任选三包3元；
- 花菜：4.7元/500g
- 小米椒：1.7元/50g
- 大娃娃菜：3.6元/500g
- 黑芝麻汤圆：5元/400g/袋
- 水果味汤圆：6元/360g/袋（会员价5.5元）
- 鸡蛋饺：3.5元/10只/袋（会员价每袋立减0.5元）
- 鸡蛋：22元/30枚约1800g/盒
- 糯米烧麦：14元/20个约1kg/袋
- 香菇：9元/1斤
- 黑鱼片：5元/250g/袋
- 广西沙糖桔：21元/5斤/箱（会员价八折）
```

问题2期望的正确回答：
```
单项计算：
- 苹果1斤：4元/kg * 0.5kg = 2元
- 菲律宾进口香蕉10根：1.5元/根 * 10 = 15元
- 光明炭烧酸奶一瓶：15元
- 光明鲜牛奶975ml：12元
- 红心火龙果：2个：3元/个*2个=6元
- 160g桥头牌火锅底料：5元
- 原味冷藏豆乳2包+草莓味冷藏豆乳1包：会员任意口味任选三包3元
- 小米椒100g：1.7元/50g * 2个50g = 3.4元
- 水果味汤圆1袋：5.5元
- 鸡蛋饺2袋：3元/袋 * 2袋 = 6元
- 香菇：250g ：9元/1斤 * 0.5斤 = 4.5元
- 广西沙糖桔1箱：21元 * 0.8 = 16.8元

合计：2+15+15+12+6+5+3+3.4+5.5+6+4.5+16.8=94.2元
```

